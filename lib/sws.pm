#--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#Package de la librairie
package sws;
#--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
@ISA = qw(Exporter);	#Permet l'export
@EXPORT = qw(
               %sws
               get_sws

            );
#--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
use def;
use tools;
use Data::Dumper;

#--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#see();
%sws = ();
%sws = %{get_sws($dbh)};


################################################################################
# get_sws
################################################################################
sub get_sws
{
  my $dbh_sws = $_[0] || $dbh;
  my @languages = get_languages_ids($dbh_sws);

  foreach $lg (@languages)
  {
    my @urls = sql_lines({dbh=>$dbh_sws, select=>"keyword, url_rewriting, id_lg", table=>"migcms_urls", where=>"keyword != '' AND url_rewriting != '' AND id_lg=$lg"});
    foreach $url (@urls)
    {
      my %url = %{$url};

      $sws{$url{keyword}}{$lg} = $url{url_rewriting};
    }
  }

  return \%sws;
}
 

1;
